# Test Environment Configuration for SafeSnap
# This configuration is used during automated testing

# === Database Configuration (H2 In-Memory) ===
spring.datasource.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.show-sql=false
spring.h2.console.enabled=true
spring.flyway.enabled=false

# === JWT Configuration ===
jwt.secret=uqGxrUwv74rDuyxWE7c1I2VuCugiCnhV11FS3X2PxvU=
jwt.expiration=86400000

# === AWS S3 Configuration (Mock/Test) ===
aws.access-key-id=test-access-key
aws.secret-access-key=test-secret-key
aws.region=us-east-1
aws.s3.bucket-name=test-safesnap-bucket
aws.endpoint-url=http://localhost:4566

# === Google Vision API Configuration (Disabled) ===
google.vision.enabled=false
google.vision.project-id=test-project
google.vision.credentials-path=
google.vision.mock-mode=true

# === OpenAI Configuration (Disabled) ===
openai.api.key=test-openai-key
openai.api.url=https://api.openai.com/v1/chat/completions
openai.model=gpt-3.5-turbo
openai.max-tokens=1200
openai.temperature=0.3
openai.enabled=false
openai.mock-mode=true

# === OpenAI Rate Limiting (Test) ===
openai.rate-limit.requests-per-minute=1000
openai.rate-limit.tokens-per-minute=100000

# === RCA Generation Configuration ===
rca.auto-generate=false
rca.timeout-minutes=1

# === Logging Configuration (Test) ===
logging.level.com.safesnap=DEBUG
logging.level.org.springframework.security=WARN
logging.level.org.springframework.web=WARN
logging.level.org.hibernate.SQL=ERROR
logging.level.org.springframework.test=INFO

# === Rate Limiting Configuration (Disabled for Tests) ===
rate-limiting.enabled=false
rate-limiting.test-mode=true

# === Monitoring Configuration (Minimal for Tests) ===
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=always
management.endpoint.prometheus.enabled=false
management.metrics.export.prometheus.enabled=false

# === Security Configuration (Test Mode) ===
server.error.include-stacktrace=always
server.error.include-message=always
server.error.include-binding-errors=always

# === CORS Configuration (Permissive for Tests) ===
cors.allowed-origins=*
cors.allowed-methods=GET,POST,PUT,DELETE,PATCH,OPTIONS
cors.allowed-headers=*
cors.allow-credentials=true

# === Database Connection Pool (Minimal for Tests) ===
spring.datasource.hikari.minimum-idle=1
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.idle-timeout=60000
spring.datasource.hikari.max-lifetime=120000

